<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bo.ucb.edu.medichub.dao.PaymentDao">
    <insert id="createPayment" parameterType="bo.ucb.edu.medichub.model.Payment">
        INSERT INTO payment VALUES (
            null, #{cardId}, #{reserveId}, #{paymentDate}, #{amount},
            1, #{transaction.txId}, #{transaction.txHost}, #{transaction.txUserId}, #{transaction.txDate}
        )
    </insert>

    <select id="getProductList" resultMap="productListMap">
        SELECT
            product_reserve_id as productTransactionId,
            product_id as productId,
            quantity as quantity
        FROM product_reserve
        WHERE
            reserve_id = #{reserveId}
        and status = 1
    </select>

    <resultMap id="productListMap" type="bo.ucb.edu.medichub.dto.ProductTransactionRequest">
        <result column="productTransactionId" property="productTransactionId"/>
        <result column="productId" property="productId"/>
        <result column="quantity" property="quantity"/>
    </resultMap>
</mapper>
